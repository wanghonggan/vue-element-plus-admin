import{C as e,a$ as t,D as o,U as n,aM as s,ax as a,S as u,ce as l,am as c,b1 as d,v as m,c1 as r,c9 as i,cf as v,ca as f,an as p,E as y,F as M,d as h,g as b,z as x,aO as E}from"./index.ca8543f6.js";import{g}from"./scroll.f8e45daf.js";import{P as k}from"./vnode.7df0c94a.js";const w=(s,a,u)=>{let l={offsetX:0,offsetY:0};const c=e=>{const t=e.clientX,o=e.clientY,{offsetX:a,offsetY:u}=l,c=s.value.getBoundingClientRect(),d=c.left,m=c.top,r=c.width,i=c.height,v=document.documentElement.clientWidth,f=document.documentElement.clientHeight,p=-d+a,y=-m+u,M=v-d-r+a,h=f-m-i+u,b=e=>{const c=Math.min(Math.max(a+e.clientX-t,p),M),d=Math.min(Math.max(u+e.clientY-o,y),h);l={offsetX:c,offsetY:d},s.value.style.transform=`translate(${n(c)}, ${n(d)})`},x=()=>{document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",x)};document.addEventListener("mousemove",b),document.addEventListener("mouseup",x)},d=()=>{a.value&&s.value&&a.value.removeEventListener("mousedown",c)};e((()=>{t((()=>{u.value?a.value&&s.value&&a.value.addEventListener("mousedown",c):d()}))})),o((()=>{d()}))},C=e=>{s(e)||a("[useLockscreen]","You need to pass a ref param to this function");const t=u("popup"),o=l((()=>t.bm("parent","hidden")));if(!c||d(document.body,o.value))return;let n=0,p=!1,y="0";const M=()=>{f(document.body,o.value),p&&(document.body.style.width=y)};m(e,(e=>{if(!e)return void M();p=!d(document.body,o.value),p&&(y=document.body.style.width),n=g(t.namespace.value);const s=document.documentElement.clientHeight<document.body.scrollHeight,a=r(document.body,"overflowY");n>0&&(s||"scroll"===a)&&p&&(document.body.style.width=`calc(100% - ${n}px)`),i(document.body,o.value)})),v((()=>M()))},L=e=>{if(!e)return{onClick:p,onMousedown:p,onMouseup:p};let t=!1,o=!1;return{onClick:n=>{t&&o&&e(n),t=o=!1},onMousedown:e=>{t=e.target===e.currentTarget},onMouseup:e=>{o=e.target===e.currentTarget}}};const Y=h({name:"ElOverlay",props:y({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:M([String,Array,Object])},zIndex:{type:M([String,Number])}}),emits:{click:e=>e instanceof MouseEvent},setup(e,{slots:t,emit:o}){const n=u("overlay"),{onClick:s,onMousedown:a,onMouseup:l}=L(e.customMaskEvent?void 0:e=>{o("click",e)});return()=>e.mask?b("div",{class:[n.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:s,onMousedown:a,onMouseup:l},[x(t,"default")],k.STYLE|k.CLASS|k.PROPS,["onClick","onMouseup","onMousedown"]):E("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[x(t,"default")])}});export{Y as E,C as a,L as b,w as u};
