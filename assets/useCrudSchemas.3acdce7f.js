import{_ as e}from"./ContentWrap.vue_vue_type_script_setup_true_lang.0c69d32c.js";import{_ as a}from"./Search.vue_vue_type_script_setup_true_lang.45b234a7.js";import{d as t,cB as o,s,aO as l,c7 as r,r as i,o as n,h as m,w as p,g as c,a as d,e as u,y as b,t as f,k as g}from"./index.ca8543f6.js";import{E as j}from"./el-button.73ad49c8.js";import{E as _}from"./el-tag.2f69b4d8.js";import{_ as h}from"./Table.vue_vue_type_script_lang.248ec8d0.js";import{g as v,d as w}from"./index.40c2a96d.js";import{u as y}from"./useTable.1665cf8a.js";import{u as D}from"./useCrudSchemas.15ae3958.js";import"./el-card.f02580c9.js";import"./el-popper.f3acbe71.js";import"./index.8bd5fe6d.js";import"./Form.23a0ea8f.js";import"./el-col.9ac8d113.js";import"./el-input.25e7e838.js";import"./event.0d56b427.js";import"./index.e45e81ad.js";import"./tsxHelper.bd62a1d5.js";import"./index.ab0dc9e2.js";import"./scroll.f8e45daf.js";import"./debounce.a2c505c4.js";import"./validator.db186fb8.js";import"./el-input-number.a668e1ad.js";import"./el-switch.2f61c668.js";import"./el-divider.1716cdb1.js";import"./InputPassword.f72dac73.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./style.css_vue_type_style_index_0_src_true_lang.1f99cb87.js";import"./aria.062511a5.js";import"./browser.3e046823.js";import"./useForm.e5e51157.js";import"./el-message-box.dc4f8d41.js";import"./el-overlay.e2ca307a.js";import"./vnode.7df0c94a.js";import"./tree.b6e955f9.js";const x={class:"mb-10px"},S=t({__name:"useCrudSchemas",setup(t){const S=o(),{register:P,tableObject:C,methods:R}=y({getListApi:v,delListApi:w,response:{list:"list",total:"total"}}),{getList:k,setSearchParams:z}=R;k();const{t:L}=g(),Y=s([{field:"index",label:L("tableDemo.index"),type:"index",form:{show:!1},detail:{show:!1}},{field:"title",label:L("tableDemo.title"),search:{show:!0},form:{colProps:{span:24}},detail:{span:24}},{field:"author",label:L("tableDemo.author")},{field:"display_time",label:L("tableDemo.displayTime"),form:{component:"DatePicker",componentProps:{type:"datetime",valueFormat:"YYYY-MM-DD HH:mm:ss"}}},{field:"importance",label:L("tableDemo.importance"),formatter:(e,a,t)=>l(_,{type:1===t?"success":2===t?"warning":"danger"},(()=>L(1===t?"tableDemo.important":2===t?"tableDemo.good":"tableDemo.commonly"))),search:{show:!0,component:"Select",componentProps:{options:S.getDictObj.importance}},form:{component:"Select",componentProps:{options:[{label:"重要",value:3},{label:"良好",value:2},{label:"一般",value:1}]}}},{field:"importance2",label:`${L("tableDemo.importance")}2`,search:{show:!0,component:"Select",dictName:"importance"}},{field:"importance3",label:`${L("tableDemo.importance")}3`,search:{show:!0,component:"Select",api:async()=>(await r()).data}},{field:"pageviews",label:L("tableDemo.pageviews"),form:{component:"InputNumber",value:0}},{field:"content",label:L("exampleDemo.content"),table:{show:!1},form:{component:"Editor",colProps:{span:24}},detail:{span:24}},{field:"action",width:"260px",label:L("tableDemo.action"),form:{show:!1},detail:{show:!1}}]),{allSchemas:E}=D(Y),F=i(!1),H=async(e,a)=>{var t;C.currentRow=e;const{delList:o,getSelections:s}=R,l=await s();F.value=!0,await o(a?l.map((e=>e.id)):[null==(t=C.currentRow)?void 0:t.id],a).finally((()=>{F.value=!1}))};return(t,o)=>(n(),m(d(e),null,{default:p((()=>[c(d(a),{schema:d(E).searchSchema,onSearch:d(z),onReset:d(z)},null,8,["schema","onSearch","onReset"]),u("div",x,[c(d(j),{loading:F.value,type:"danger",onClick:o[0]||(o[0]=e=>H(null,!0))},{default:p((()=>[b(f(d(L)("exampleDemo.del")),1)])),_:1},8,["loading"])]),c(d(h),{pageSize:d(C).pageSize,"onUpdate:pageSize":o[1]||(o[1]=e=>d(C).pageSize=e),currentPage:d(C).currentPage,"onUpdate:currentPage":o[2]||(o[2]=e=>d(C).currentPage=e),columns:d(E).tableColumns,data:d(C).tableList,loading:d(C).loading,pagination:{total:d(C).total},onRegister:d(P)},{action:p((({row:e})=>[c(d(j),{type:"danger",onClick:a=>H(e,!1)},{default:p((()=>[b(f(d(L)("exampleDemo.del")),1)])),_:2},1032,["onClick"])])),_:1},8,["pageSize","currentPage","columns","data","loading","pagination","onRegister"])])),_:1}))}});export{S as default};
